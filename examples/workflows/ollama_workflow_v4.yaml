# Example V4 Workflow - Ollama Text Generation
# This workflow demonstrates dependent tasks with parameter substitution

name: "Ollama Research Workflow"
description: "Generate a topic and write a research article about it using Ollama"
version: "1.0"

tasks:
  - id: "generate-topic"
    name: "Generate Research Topic"
    protocol: "llm/v1"
    method: "generate"
    priority: "high"
    params:
      prompt: "Generate a unique and interesting research topic in the field of artificial intelligence. Respond with just the topic title, nothing else."
      model: "llama3"
      temperature: 0.8
      max_tokens: 50

  - id: "research-outline"
    name: "Create Research Outline"
    protocol: "llm/v1"
    method: "generate"
    dependencies: ["generate-topic"]
    priority: "high"
    params:
      prompt: "Create a detailed research outline for this topic: ${generate-topic.result.content}. Include 5 main sections with bullet points."
      model: "llama3"
      temperature: 0.6
      max_tokens: 300

  - id: "write-introduction"
    name: "Write Introduction"
    protocol: "llm/v1"
    method: "generate"
    dependencies: ["generate-topic", "research-outline"]
    priority: "normal"
    params:
      prompt: "Write a compelling introduction paragraph for a research article about: ${generate-topic.result.content}. Use this outline for context: ${research-outline.result.content}"
      model: "llama3"
      temperature: 0.7
      max_tokens: 200

  - id: "write-conclusion"
    name: "Write Conclusion"
    protocol: "llm/v1" 
    method: "generate"
    dependencies: ["generate-topic", "research-outline"]
    priority: "normal"
    params:
      prompt: "Write a thoughtful conclusion paragraph for a research article about: ${generate-topic.result.content}. Reference this outline: ${research-outline.result.content}"
      model: "llama3"
      temperature: 0.7
      max_tokens: 200

  - id: "final-article"
    name: "Compile Final Article"
    protocol: "llm/v1"
    method: "generate"
    dependencies: ["generate-topic", "research-outline", "write-introduction", "write-conclusion"]
    priority: "high"
    params:
      prompt: |
        Compile the following components into a coherent research article:
        
        Topic: ${generate-topic.result.content}
        Outline: ${research-outline.result.content}
        Introduction: ${write-introduction.result.content}
        Conclusion: ${write-conclusion.result.content}
        
        Create a polished article with proper flow between sections.
      model: "llama3"
      temperature: 0.5
      max_tokens: 800

# Workflow metadata
metadata:
  author: "Gleitzeit V4"
  tags: ["ollama", "research", "ai", "workflow"]
  estimated_duration: "5-10 minutes"
  requires_models: ["llama3"]